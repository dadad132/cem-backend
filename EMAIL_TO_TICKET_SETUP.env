# ===========================================
# EMAIL-TO-TICKET SYSTEM CONFIGURATION
# ===========================================
# This file contains example configuration for the email-to-ticket feature
# Copy these settings to your .env file and update with your actual values

# ===== ENABLE EMAIL-TO-TICKET =====
# Set to true to enable automatic ticket creation from support emails
EMAIL_TO_TICKET_ENABLED=false

# How often to check support inbox (in seconds)
# Default: 300 (5 minutes)
EMAIL_TO_TICKET_CHECK_INTERVAL=300

# Your support email address (for display purposes)
SUPPORT_EMAIL=support@yourdomain.com


# ===== IMAP SETTINGS (Receiving Emails) =====
# Email server to connect to for receiving support emails
IMAP_HOST=imap.gmail.com
IMAP_PORT=993
IMAP_USERNAME=support@yourdomain.com
IMAP_PASSWORD=your-app-password-here
IMAP_USE_SSL=true


# ===== SMTP SETTINGS (Sending Email Replies) =====
# These should already be configured in your main .env file
# Included here for reference

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=support@yourdomain.com
SMTP_PASSWORD=your-app-password-here
SMTP_FROM=support@yourdomain.com
SMTP_USE_TLS=true


# ===========================================
# GMAIL-SPECIFIC SETUP INSTRUCTIONS
# ===========================================

# 1. Enable IMAP in Gmail:
#    - Go to Gmail Settings â†’ Forwarding and POP/IMAP
#    - Enable IMAP
#    - Save changes

# 2. Create App Password:
#    - Go to https://myaccount.google.com/apppasswords
#    - Select "Mail" and your device
#    - Copy the 16-character password
#    - Use this password for IMAP_PASSWORD and SMTP_PASSWORD

# 3. Update .env file:
#    - Copy the settings above to your .env file
#    - Replace yourdomain.com with your actual domain
#    - Replace your-app-password-here with the app password
#    - Set EMAIL_TO_TICKET_ENABLED=true

# 4. Restart server:
#    - Stop the server (CTRL+C)
#    - Run: python start_server.py
#    - Background task will start checking emails every 5 minutes


# ===========================================
# HOW IT WORKS
# ===========================================

# 1. CLIENT SENDS EMAIL:
#    - Client emails: support@yourdomain.com
#    - Subject: "Website is down"
#    - Body: "I can't access the website..."

# 2. SYSTEM CREATES TICKET:
#    - Ticket #TKT-2024-00123 is created automatically
#    - Priority: Medium (default)
#    - Category: Support (default)
#    - Status: Open

# 3. AUTO-REPLY SENT:
#    - Client receives confirmation email
#    - Email contains ticket number: [TKT-2024-00123]
#    - Instructions to keep ticket number in subject line

# 4. CLIENT REPLIES:
#    - Client replies to email (keeps ticket number in subject)
#    - Reply is added as comment to existing ticket
#    - No new ticket is created

# 5. STAFF REPLIES:
#    - Staff adds comment via web interface
#    - Email notification sent to client
#    - Client can reply to continue conversation


# ===========================================
# MICROSOFT 365 / OUTLOOK SETUP
# ===========================================

# IMAP_HOST=outlook.office365.com
# IMAP_PORT=993
# IMAP_USERNAME=support@yourdomain.com
# IMAP_PASSWORD=your-password-here
# IMAP_USE_SSL=true

# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USERNAME=support@yourdomain.com
# SMTP_PASSWORD=your-password-here
# SMTP_USE_TLS=true


# ===========================================
# CUSTOM EMAIL PROVIDER SETUP
# ===========================================

# Contact your email provider for:
# - IMAP server hostname and port
# - SMTP server hostname and port
# - Whether to use SSL/TLS
# - Authentication method

# Common IMAP ports:
# - 993 (SSL/TLS)
# - 143 (STARTTLS)

# Common SMTP ports:
# - 587 (STARTTLS - recommended)
# - 465 (SSL/TLS)
# - 25 (unencrypted - not recommended)


# ===========================================
# TROUBLESHOOTING
# ===========================================

# Problem: Background task not starting
# Solution: Check server logs for error messages
#          Verify EMAIL_TO_TICKET_ENABLED=true

# Problem: Cannot connect to IMAP server
# Solution: Verify IMAP_HOST, IMAP_PORT, credentials
#          Check if IMAP is enabled in email settings
#          Try connecting with email client first

# Problem: Emails not creating tickets
# Solution: Check server logs: "[email-to-ticket]"
#          Verify emails are marked as unread
#          Check IMAP credentials are correct

# Problem: No auto-reply emails
# Solution: Verify SMTP settings are correct
#          Check spam folder
#          Look for errors in server logs

# Problem: Replies creating new tickets
# Solution: Ensure ticket number [TKT-XXXX-XXXXX] in subject
#          Check email subject line format
